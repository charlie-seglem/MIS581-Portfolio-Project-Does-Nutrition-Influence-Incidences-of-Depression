libname sasfile '/folders/myshortcuts/SASDATA';
libname xptfile xport '/folders/myshortcuts/SASDATA/(x)Dietary Interview Total Nutrient Intakes 1st Day.XPT';
proc copy inlib=xptfile outlib=sasfile;
run;

libname sasfile '/folders/myshortcuts/SASDATA';
libname xptfile xport '/folders/myshortcuts/SASDATA/(x)Mental Health - Depression Screener.XPT';
proc copy inlib=xptfile outlib=sasfile;
run;

libname sasfile '/folders/myshortcuts/SASDATA';
libname xptfile xport '/folders/myshortcuts/SASDATA/(x)Standard Biochemistry Profile.XPT';
proc copy inlib=xptfile outlib=sasfile;
run;

DATA MIS581DATA;
MERGE MYSASLIB.DPQ_J (KEEP= SEQN DPQ010 DPQ020 DPQ030 
		DPQ040 DPQ050 DPQ060 DPQ070 DPQ080 DPQ090)
	MYSASLIB.DR1TOT_J (KEEP= SEQN DR1TKCAL DR1TPROT
		DR1TCARB DR1TSUGR DR1TFIBE DR1TTFAT DR1TSFAT
		DR1TMFAT DR1TPFAT DR1TCHOL DR1TATOC DR1TVARA 
		DR1TVB1 DR1TVB2 DR1TNIAC DR1TVB6 DR1TFOLA 
		DR1TCHL DR1TVB12 DR1TVC DR1TVD DR1TVK DR1TCALC
		DR1TPHOS DR1TMAGN DR1TIRON DR1TZINC DR1TCOPP
		DR1TSODI DR1TPOTA DR1TCAFF DR1TALCO)
	MYSASLIB.BIOPRO_J (DROP= LBDSATLC LBDSGTLC LBDSTBLC);
BY SEQN;
RUN; 

options missing='';
DATA MIS581DATA1;
SET MIS581DATA;
IF missing(DPQ010) then delete;
run;

DATA MIS581DATA2;
SET MIS581DATA1;
IF missing(DPQ020) or missing(DPQ040) or missing(DPQ060) or 
	missing(DPQ090) or missing(DR1TKCAL) or missing(LBXSASSI) 
	or missing(LBXSLDSI) or missing(LBDSTBSI) then delete;
run;

PROC MEANS DATA=MIS581DATA2;
	Title "Data Descriptions and Data Dictionary";
RUN;

DATA Analysisdata;
SET MIS581DATA2;
IF DPQ020='.' or DPQ020=7 or DPQ020=9 then delete;
KEEP DPQ020 DR1TKCAL DR1TPROT DR1TCARB DR1TSUGR DR1TFIBE DR1TTFAT DR1TSFAT DR1TMFAT DR1TPFAT DR1TCHOL DR1TATOC DR1TVARA DR1TVB1 DR1TVB2 DR1TNIAC DR1TVB6 DR1TFOLA DR1TCHL DR1TVB12 DR1TVC DR1TVD DR1TVK DR1TCALC DR1TPHOS DR1TMAGN DR1TIRON DR1TZINC DR1TCOPP DR1TSODI DR1TPOTA DR1TCAFF DR1TALCO LBXSATSI LBXSAL LBXSAPSI LBXSASSI LBXSC3SI LBXSBU LBXSCLSI LBXSCK LBXSCR LBXSGB LBXSGL LBXSGTSI LBXSIR LBXSLDSI LBXSOSSI LBXSPH LBXSKSI LBXSNASI LBXSTB LBDSTBSI LBXSCA LBXSCH LBXSTP LBXSTR LBXSUA;
RUN;

PROC MEANS DATA=Analysisdata;
RUN;

PROC UNIVARIATE NORMAL PLOT DATA=Analysisdata;
RUN;

PROC CORR Data=Analysisdata SPEARMAN;
	VAR DR1TKCAL--LBXSUA;
	WITH DPQ020;
RUN;

PROC REG;
MODEL DPQ020=DR1TFIBE DR1TFOLA DR1TCHL DR1TVK DR1TMAGN DR1TCOPP DR1TPOTA LBXSAL LBXSCK;
TITLE "Multi-Regression Model Using Only Independent Variables that Showed Significant Linear Correlation";
RUN;
QUIT;

PROC REG;
	MODEL DPQ020=DR1TKCAL--LBXSUA;
	TITLE "Multi-Regression Model Using all Independent Variables";
RUN;
QUIT;

PROC ANOVA DATA= Analysisdata;
	CLASS DPQ020;
MODEL DR1TFIBE DR1TFOLA DR1TCHL DR1TVK DR1TMAGN DR1TCOPP DR1TPOTA LBXSAL
	LBXSCK = DPQ020;
	MEANS DPQ020/TUKEY;
	TITLE "ANOVA Severity of Depression for all Correlatively Significant
	Variables";
RUN;

PROC ANOVA DATA= Analysisdata;
	CLASS DPQ020;
	MODEL DR1TFOLA=DPQ020;
	MEANS DPQ020/TUKEY;
	TITLE "ANOVA of Severity of Depression by Folate Intake";
RUN;

PROC ANOVA DATA= Analysisdata;
	CLASS DPQ020;
	MODEL LBXSAL=DPQ020;
	MEANS DPQ020/TUKEY;
	TITLE "ANOVA of Severity of Depression by Albumin Measurement";
RUN;

PROC ANOVA DATA= Analysisdata;
	CLASS DPQ020;
	MODEL DR1TFIBE=DPQ020;
	MEANS DPQ020/TUKEY;
	TITLE "ANOVA of Severity of Depression by Dietary Fiber Intake";
RUN;

PROC ANOVA DATA= Analysisdata;
	CLASS DPQ020;
	MODEL DR1TMAGN=DPQ020;
	MEANS DPQ020/TUKEY;
	TITLE "ANOVA of Severity of Depression by Magnesium Intake";
RUN;

PROC ANOVA DATA= Analysisdata;
	CLASS DPQ020;
	MODEL DR1TPOTA=DPQ020;
	MEANS DPQ020/TUKEY;
	TITLE "ANOVA of Severity of Depression by Potassium Intake";
RUN; 
